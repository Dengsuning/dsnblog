{"version":3,"sources":["webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/modules/es.array.fill.js","webpack:///./src/demoCmp/canvas/bubble.ts"],"names":["toObject","toAbsoluteIndex","toLength","module","exports","value","O","this","length","argumentsLength","arguments","index","undefined","end","endPos","$","toInteger","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","len","actualStart","TypeError","fill","addToUnscopables","Bubble","x","y","option","r","color","setRandomRadius","setRandomColor","random","radius","alpha","floor","randomColor","HEIGHT","realSpeed","speed","ctx","WIDTH","options","presetOptions","population","timeGap","itemList","animateID","Object","assign","stopAnimate","startAnimate","item","fillStyle","shadowBlur","shadowColor","beginPath","arc","PI","closePath","paddingNum","push","Array","i","deleteItem","move","clearRect","forEach","itemAction","drawItem","window","requestAnimationFrame","timestamp","hasCanvasDeleted","document","body","contains","canvas","animate","call","autoPadding","changeStatus","listInit","cancelFunc","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","error","console","warn"],"mappings":"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","file":"js/chunk-52bf4e99.48bdd765.js","sourcesContent":["'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","/**\n * title: Canvas彩色气泡上升效果\n */\n\ninterface BubbleOption {\n  radius: number[];\n  color: null | undefined | string;\n  speed: number;\n}\ninterface BubbleInterface {\n  x: number;\n  y: number;\n  r: number;\n  option: BubbleOption;\n}\nclass Bubble implements BubbleInterface {\n  r: number = 0;\n  color: string = \"white\";\n  constructor(\n    public x: number,\n    public y: number,\n    public option: {\n      radius: number[];\n      color: null | undefined | string;\n      speed: number;\n    }\n  ) {\n    this.setRandomRadius();\n  }\n\n  changeStatus(x: number, y: number, option: BubbleOption) {\n    this.x = x;\n    this.y = y;\n    this.option = option;\n    this.setRandomRadius();\n    if (!option.color) {\n      this.setRandomColor();\n    }\n  }\n\n  setRandomRadius(): void {\n    this.r =\n      ~~(Math.random() * (this.option.radius[1] - this.option.radius[0])) +\n      this.option.radius[0];\n  }\n\n  setRandomColor() {\n    let alpha = Math.floor(Math.random() * 10 + 1) / 10;\n    let randomColor = () => ~~(Math.random() * 255);\n    this.color = `rgba(${randomColor()}, ${randomColor()}, ${randomColor()}, ${alpha})`;\n  }\n\n  move(HEIGHT: number) {\n    // speed 代表每秒移动的像素 为 1 ~ 100\n    // requestAnimationFrame每秒执行60次 speed = realSpeed * 60\n    // requestAnimationFrame相对速度(realSpeed)则是 speed / 60 => speed = realSpeed * 60\n    // timeGap 设置动画间隔为50毫秒 则每秒执行 1000 / 50 = 20次 realSpeed = speed / 20\n    let realSpeed = this.option.speed / 20;\n    this.y -= realSpeed;\n    if (this.y <= -10) {\n      this.y = HEIGHT + 10;\n    }\n  }\n}\nexport default class {\n  presetOptions = {\n    color: null,\n    speed: 20,\n    population: 40,\n    radius: [5, 15]\n  };\n\n  timeGap = 50;\n  itemList: any[] = [];\n  animateID: number = 0;\n\n  constructor(\n    public ctx: any,\n    public WIDTH: number,\n    public HEIGHT: number,\n    options = {}\n  ) {\n    Object.assign(this.presetOptions, options);\n  }\n\n  resetOptions(options: any) {\n    this.stopAnimate();\n    Object.assign(this.presetOptions, options);\n    this.startAnimate();\n  }\n\n  drawItem(item: any) {\n    this.ctx.fillStyle = item.color;\n    this.ctx.shadowBlur = ~~(item.r + 5);\n    this.ctx.shadowColor = item.color;\n    this.ctx.beginPath();\n    this.ctx.arc(item.x, item.y, item.r, 0, Math.PI * 2);\n    this.ctx.closePath();\n    this.ctx.fill();\n  }\n\n  autoPadding() {\n    if (!(this.itemList && this.itemList.length)) {\n      this.itemList = [];\n    }\n    let paddingNum = this.presetOptions.population - this.itemList.length;\n    if (paddingNum > 0) {\n      this.itemList.push(...new Array(paddingNum));\n    } else if (this.itemList.length + paddingNum > 0) {\n      for (let i = 0; i > paddingNum; i--) {\n        this.deleteItem();\n      }\n    }\n  }\n\n  deleteItem() {\n    let index: number = ~~(Math.random() * this.itemList.length);\n    this.itemList.splice(index, 1);\n  }\n\n  itemAction(item: any) {\n    item.move(this.HEIGHT);\n  }\n\n  animate() {\n    this.ctx.clearRect(0, 0, this.WIDTH, this.HEIGHT);\n    this.itemList.forEach(item => {\n      this.itemAction(item);\n      this.drawItem(item);\n    });\n    this.animateID = window.requestAnimationFrame(timestamp => {\n      // 间隔 2s 检查 canvas是否还在文档流中 （vue 热更新时canvas的引用会过时，或许还有其他场景需要这个判断）\n      if (timestamp - this.timeGap > 2000) {\n        let hasCanvasDeleted = !window.document.body.contains(this.ctx.canvas);\n        if (hasCanvasDeleted) {\n          this.stopAnimate();\n          return;\n        }\n        this.timeGap = timestamp;\n      }\n      this.animate.call(this);\n    });\n  }\n\n  listInit() {\n    this.autoPadding();\n    for (let index = 0; index < this.presetOptions.population; index++) {\n      let x = ~~(Math.random() * this.WIDTH);\n      let y = ~~(Math.random() * this.HEIGHT);\n      let item = this.itemList[index];\n      if (item) {\n        item.changeStatus(x, y, this.presetOptions);\n      } else {\n        this.itemList[index] = new Bubble(x, y, this.presetOptions);\n      }\n    }\n  }\n\n  startAnimate() {\n    this.listInit();\n    this.animate();\n  }\n\n  stopAnimate() {\n    try {\n      let cancelFunc =\n        window.cancelAnimationFrame ||\n        window.webkitCancelAnimationFrame ||\n        (window as any).mozCancelAnimationFrame;\n      cancelFunc(this.animateID);\n    } catch (error) {\n      console.warn(error);\n    }\n  }\n}\n"],"sourceRoot":""}